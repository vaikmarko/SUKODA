<!DOCTYPE html>
<html lang="et" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUKODA | Tellimus õnnestus</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="assets/logo/icon-s-black.svg">
    <link rel="apple-touch-icon" href="assets/logo/icon-square.svg">
    
    <!-- Meta Pixel -->
    <script src="assets/js/tracking.js"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        serif: ['Cormorant Garamond', 'Georgia', 'serif'],
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    colors: {
                        black: '#111111',
                        paper: '#FAF8F5',
                        cream: '#F5F0EB',
                        accent: '#B8976A',
                        muted: '#8A8578',
                    },
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #FAF8F5;
            color: #111111;
        }
        .grid-line-b {
            border-bottom: 1px solid #E8E3DD;
        }
        ::selection {
            background: #111;
            color: #FAF8F5;
        }
        [x-cloak] {
            display: none !important;
        }

        /* Luxury hover effects */
        .luxury-link {
            position: relative;
            display: inline-block;
        }
        .luxury-link::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 1px;
            background: #B8976A;
            transition: width 0.4s ease;
        }
        .luxury-link:hover::after {
            width: 100%;
        }

        .accent-line {
            width: 40px;
            height: 1px;
            background: #B8976A;
        }

        @keyframes checkmark {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }
        .animate-checkmark {
            animation: checkmark 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide-up {
            animation: slideUp 0.8s ease-out 0.3s forwards;
            opacity: 0;
        }
        .animate-slide-up-delay {
            animation: slideUp 0.8s ease-out 0.6s forwards;
            opacity: 0;
        }

        /* Scroll progress */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            height: 2px;
            background: #B8976A;
            z-index: 100;
            transition: width 0.1s linear;
        }
    </style>
    <script src="assets/js/checkout.js"></script>
</head>
<body class="antialiased" x-data="{ 
    lang: 'et',
    order: null,
    loading: true,
    error: false,
    calendarUrl: '',
    async init() {
        const params = SUKODA.getUrlParams();
        
        // Determine calendar URL based on size parameter
        const size = params.size || '90';
        const calUrls = {
            '50': 'https://cal.eu/sukoda/koristus-50',
            '90': 'https://cal.eu/sukoda/koristus-90',
            '120': 'https://cal.eu/sukoda/koristus-120',
            '150': 'https://cal.eu/sukoda/koristus-150'
        };
        let baseUrl = calUrls[size] || calUrls['90'];
        
        if (params.orderId) {
            try {
                this.order = await SUKODA.getOrderDetails(params.orderId);
                
                // Track Purchase conversion
                if (this.order && window.SUKODA_TRACKING) {
                    SUKODA_TRACKING.trackPurchase({
                        name: (this.order.packageType || '') + ' ' + (this.order.size || ''),
                        category: this.order.type || 'subscription',
                        value: this.order.amount ? this.order.amount / 100 : 0,
                    });
                }
                
                // Prefill Cal.eu with customer info
                if (this.order?.customer) {
                    const prefillParams = new URLSearchParams();
                    if (this.order.customer.name) prefillParams.set('name', this.order.customer.name);
                    if (this.order.customer.email) prefillParams.set('email', this.order.customer.email);
                    if (this.order.customer.address) prefillParams.set('location', this.order.customer.address);
                    if (this.order.customer.additionalInfo) prefillParams.set('notes', this.order.customer.additionalInfo);
                    baseUrl += '?' + prefillParams.toString();
                }
            } catch (e) {
                console.error(e);
            }
        }
        this.calendarUrl = baseUrl;
        this.loading = false;
    }
}">

    <!-- Scroll Progress -->
    <div id="scrollProgress" class="scroll-progress" style="width: 0%"></div>

    <!-- Grid Container -->
    <div class="max-w-[1440px] mx-auto bg-paper min-h-screen border-x border-[#E8E3DD]">
        
        <!-- Navigation -->
        <nav class="sticky top-0 z-50 bg-paper/95 backdrop-blur-sm grid-line-b">
            <div class="flex justify-between items-center h-16 md:h-20 px-4 md:px-12">
                <a href="index.html" class="font-serif text-2xl md:text-3xl tracking-[0.08em] font-light">
                    SUKODA
                </a>
                
                <div class="flex items-center gap-4 md:gap-6">
                    <div class="flex text-[10px] uppercase tracking-[0.2em] font-sans font-medium gap-2">
                        <button @click="lang = 'et'" :class="lang === 'et' ? 'text-black' : 'text-muted hover:text-black'" class="transition-colors">ET</button>
                        <span class="text-[#D4CFC8]">/</span>
                        <button @click="lang = 'en'" :class="lang === 'en' ? 'text-black' : 'text-muted hover:text-black'" class="transition-colors">EN</button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Success Content -->
        <main class="min-h-[80vh] flex items-center justify-center px-4 py-12 md:py-24">
            <div class="max-w-xl w-full text-center">
                
                <!-- Loading -->
                <div x-show="loading" class="py-12">
                    <div class="w-10 h-10 border border-accent border-t-transparent rounded-full animate-spin mx-auto"></div>
                </div>

                <!-- Success Message -->
                <div x-show="!loading" x-cloak>
                    <!-- Checkmark -->
                    <div class="w-20 h-20 bg-accent rounded-full flex items-center justify-center mx-auto mb-8 animate-checkmark">
                        <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>

                    <div class="animate-slide-up">
                        <h1 class="font-serif text-4xl md:text-5xl font-light mb-4">
                            <span x-show="lang === 'et'">Täname sind</span>
                            <span x-show="lang === 'en'" x-cloak>Thank you</span>
                        </h1>

                        <div class="accent-line mx-auto my-6"></div>

                        <p class="text-base text-muted font-sans font-light mb-10">
                            <span x-show="lang === 'et'">Sinu tellimus on vastu võetud.</span>
                            <span x-show="lang === 'en'" x-cloak>Your order has been received.</span>
                        </p>
                    </div>

                    <!-- Order Details -->
                    <div class="animate-slide-up-delay">
                        <div class="bg-cream/60 p-8 text-left mb-8 border-l-2 border-accent" x-show="order">
                            <h2 class="font-serif text-xl font-light mb-4" x-text="lang === 'et' ? 'Tellimuse andmed' : 'Order details'">Tellimuse andmed</h2>
                            
                            <div class="space-y-3 text-sm font-sans">
                                <div class="flex justify-between">
                                    <span class="text-muted font-light" x-text="lang === 'et' ? 'Tellimus' : 'Order'">Tellimus</span>
                                    <span class="font-light" x-text="order?.id?.substring(0, 8) + '...'"></span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-muted font-light" x-text="lang === 'et' ? 'Tüüp' : 'Type'">Tüüp</span>
                                    <span class="font-light" x-text="order?.type === 'gift' ? (lang === 'et' ? 'Kingitus' : 'Gift') : (lang === 'et' ? 'Püsitellimus' : 'Subscription')"></span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-muted font-light" x-text="lang === 'et' ? 'Nimi' : 'Name'">Nimi</span>
                                    <span class="font-light" x-text="order?.customer?.name"></span>
                                </div>
                                <div class="flex justify-between" x-show="order?.recipient">
                                    <span class="text-muted font-light" x-text="lang === 'et' ? 'Kingisaaja' : 'Recipient'">Kingisaaja</span>
                                    <span class="font-light" x-text="order?.recipient?.name"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Calendar Booking -->
                        <div class="bg-white border border-[#E8E3DD] p-6 text-left mb-8">
                            <h3 class="font-serif text-xl font-light mb-2" x-text="lang === 'et' ? 'Vali esimese külastuse aeg' : 'Choose your first visit time'">Vali esimese külastuse aeg</h3>
                            <p class="text-sm text-muted font-sans font-light mb-6" x-text="lang === 'et' ? 'Vali allpool kalendrist sulle sobiv aeg.' : 'Select a convenient time from the calendar below.'">Vali allpool kalendrist sulle sobiv aeg.</p>
                            
                            <!-- Cal.eu Embed -->
                            <div class="bg-cream/30 overflow-hidden" style="min-height: 500px;">
                                <iframe 
                                    :src="calendarUrl + (calendarUrl.includes('?') ? '&' : '?') + 'embed=true&theme=light'"
                                    width="100%" 
                                    height="600" 
                                    frameborder="0"
                                    style="border: none; min-height: 500px;"
                                    loading="lazy">
                                </iframe>
                            </div>
                            
                            <!-- Alternative Link -->
                            <p class="text-xs text-muted/60 font-sans mt-4 text-center">
                                <span x-show="lang === 'et'">Kalender ei laadi? </span>
                                <span x-show="lang === 'en'" x-cloak>Calendar not loading? </span>
                                <a :href="calendarUrl" target="_blank" class="text-accent hover:text-accent/80 transition-colors" x-text="lang === 'et' ? 'Ava uues aknas' : 'Open in new window'">Ava uues aknas</a>
                            </p>
                        </div>

                        <!-- Next Steps -->
                        <div class="bg-cream/40 p-8 text-left mb-8">
                            <h3 class="text-[10px] uppercase tracking-[0.2em] text-accent font-sans font-medium mb-6" x-text="lang === 'et' ? 'Mis edasi?' : 'What\'s next?'">Mis edasi?</h3>
                            <ul class="space-y-4 text-sm font-sans">
                                <li class="flex items-start gap-3">
                                    <span class="text-accent font-medium mt-0.5">1.</span>
                                    <span class="text-muted font-light" x-text="lang === 'et' ? 'Saatsime kinnituse sinu e-postile' : 'We\'ve sent a confirmation to your email'">Saatsime kinnituse sinu e-postile</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="text-accent font-medium mt-0.5">2.</span>
                                    <span class="text-muted font-light" x-text="lang === 'et' ? 'Vali ülalpool kalendrist sobiv aeg' : 'Choose a suitable time from the calendar above'">Vali ülalpool kalendrist sobiv aeg</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="text-accent font-medium mt-0.5">3.</span>
                                    <span class="text-muted font-light" x-text="lang === 'et' ? 'Saad automaatse meeldetuletuse enne külastust' : 'You\'ll get an automatic reminder before the visit'">Saad automaatse meeldetuletuse enne külastust</span>
                                </li>
                            </ul>
                        </div>

                        <!-- Contact -->
                        <p class="text-sm text-muted font-sans font-light mb-8">
                            <span x-show="lang === 'et'">Küsimuste korral kirjuta meile: </span>
                            <span x-show="lang === 'en'" x-cloak>For questions, contact us: </span>
                            <a href="mailto:tere@sukoda.ee" class="luxury-link text-black">tere@sukoda.ee</a>
                        </p>

                        <!-- Back to Home -->
                        <a href="index.html" class="inline-block bg-black text-paper px-10 py-4 text-[11px] uppercase tracking-[0.2em] font-sans hover:bg-accent transition-colors duration-500" x-text="lang === 'et' ? 'Tagasi avalehele' : 'Back to home'">
                            Tagasi avalehele
                        </a>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="bg-black text-paper">
            <div class="grid md:grid-cols-12 py-16 px-6 md:px-12">
                <div class="md:col-span-4 mb-8 md:mb-0">
                    <a href="index.html" class="font-serif text-2xl tracking-[0.08em] font-light block mb-4">SUKODA</a>
                    <p class="text-muted text-xs font-sans font-light leading-relaxed max-w-xs">
                        <span x-show="lang === 'et'">Sinu kodu, meie hoole all.<br>Tallinn, Eesti.</span>
                        <span x-show="lang === 'en'" x-cloak>Your home, our care.<br>Tallinn, Estonia.</span>
                    </p>
                </div>
                <div class="md:col-span-4 mb-8 md:mb-0">
                    <p class="text-[10px] uppercase tracking-[0.25em] text-muted font-sans mb-4">
                        <span x-show="lang === 'et'">Lingid</span>
                        <span x-show="lang === 'en'" x-cloak>Links</span>
                    </p>
                    <div class="flex flex-col gap-3 text-xs text-muted/70 font-sans font-light">
                        <a href="kingitus.html" class="hover:text-paper transition-colors" x-text="lang === 'et' ? 'Kingitus' : 'Gift'">Kingitus</a>
                        <a href="partnerlus.html" class="hover:text-paper transition-colors" x-text="lang === 'et' ? 'Koostöö' : 'Partnership'">Koostöö</a>
                        <a href="tingimused.html" class="hover:text-paper transition-colors" x-text="lang === 'et' ? 'Tingimused' : 'Terms'">Tingimused</a>
                        <a href="privaatsus.html" class="hover:text-paper transition-colors" x-text="lang === 'et' ? 'Privaatsuspoliitika' : 'Privacy'">Privaatsuspoliitika</a>
                    </div>
                </div>
                <div class="md:col-span-4">
                    <p class="text-[10px] uppercase tracking-[0.25em] text-muted font-sans mb-4">
                        <span x-show="lang === 'et'">Kontakt</span>
                        <span x-show="lang === 'en'" x-cloak>Contact</span>
                    </p>
                    <a href="mailto:tere@sukoda.ee" class="text-xs font-sans font-light text-muted/70 hover:text-paper transition-colors block mb-2">tere@sukoda.ee</a>
                    <a href="mailto:partner@sukoda.ee" class="text-xs font-sans font-light text-muted/70 hover:text-paper transition-colors block">partner@sukoda.ee</a>
                </div>
            </div>
            <div class="border-t border-gray-800 py-6 px-6 md:px-12">
                <p class="text-[10px] text-muted/40 font-sans text-center tracking-wide">&copy; 2026 SUKODA. Kõik õigused kaitstud.</p>
            </div>
        </footer>

    </div>

    <!-- Scripts -->
    <script>
        // Scroll progress bar
        window.addEventListener('scroll', () => {
            const scrollTop = document.documentElement.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const progress = (scrollTop / scrollHeight) * 100;
            document.getElementById('scrollProgress').style.width = progress + '%';
        });
    </script>

</body>
</html>
