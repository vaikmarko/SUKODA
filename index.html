<!DOCTYPE html>
<html lang="et" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUKODA | Sinu kodu, meie hoole all</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="assets/logo/icon-s-black.svg">
    <link rel="apple-touch-icon" href="assets/logo/icon-square.svg">
    
    <!-- Open Graph -->
    <meta property="og:title" content="SUKODA — Kodu, mis Sind ootab">
    <meta property="og:description" content="Astud sisse ja kõik on paigas. Lilled vaasis, puuviljad kausis, laual ootab käsitsi kirjutatud tervitus.">
    <meta property="og:image" content="https://sukoda.ee/assets/images/hero-luxury.jpg">
    <meta property="og:url" content="https://sukoda.ee">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="description" content="SUKODA — premium koduhooldus Tallinnas. Värsked lilled, puhas kodu, käsitsi kirjutatud tervitus. Iga kord.">
    <meta property="og:locale" content="et_EE">
    <meta property="og:site_name" content="SUKODA">
    
    <!-- Meta Pixel (noscript fallback is at end of body) -->
    <script src="assets/js/tracking.js"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        serif: ['Cormorant Garamond', 'Georgia', 'serif'],
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    colors: {
                        black: '#111111',
                        paper: '#FAF8F5',
                        cream: '#F5F0EB',
                        accent: '#B8976A',
                        muted: '#8A8578',
                    },
                    spacing: {
                        '128': '32rem',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #FAF8F5;
            color: #111111;
        }
        .grid-line {
            border-right: 1px solid #E8E3DD;
        }
        .grid-line-b {
            border-bottom: 1px solid #E8E3DD;
        }
        ::selection {
            background: #111;
            color: #FAF8F5;
        }
        [x-cloak] {
            display: none !important;
        }

        /* Luxury animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes letterReveal {
            from { opacity: 0; letter-spacing: 0.3em; }
            to { opacity: 1; letter-spacing: normal; }
        }
        @keyframes scaleIn {
            from { opacity: 0; transform: scale(1.05); }
            to { opacity: 1; transform: scale(1); }
        }

        .animate-fade-in {
            animation: fadeIn 1.2s ease-out forwards;
        }
        .animate-slide-up {
            animation: slideUp 1s ease-out forwards;
        }
        .animate-hero-title {
            animation: slideUp 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.3s forwards;
            opacity: 0;
        }
        .animate-hero-subtitle {
            animation: slideUp 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.7s forwards;
            opacity: 0;
        }
        .animate-hero-cta {
            animation: fadeIn 0.8s ease-out 1.1s forwards;
            opacity: 0;
        }
        .animate-hero-image {
            animation: scaleIn 1.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.2s forwards;
            opacity: 0;
        }

        /* Scroll reveal */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }
        .reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Luxury hover effects */
        .luxury-link {
            position: relative;
            display: inline-block;
        }
        .luxury-link::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 1px;
            background: #B8976A;
            transition: width 0.4s ease;
        }
        .luxury-link:hover::after {
            width: 100%;
        }

        /* Accent line */
        .accent-line {
            width: 40px;
            height: 1px;
            background: #B8976A;
        }

        /* Gold accent text */
        .text-gold {
            color: #B8976A;
        }

        /* Preloader */
        .preloader {
            position: fixed;
            inset: 0;
            background: #FAF8F5;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.6s ease, visibility 0.6s ease;
        }
        .preloader.hidden {
            opacity: 0;
            visibility: hidden;
        }
        .preloader-logo {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2rem;
            font-weight: 400;
            letter-spacing: 0.15em;
            animation: letterReveal 1.2s ease-out forwards;
        }

        /* Scroll progress */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            height: 2px;
            background: #B8976A;
            z-index: 9998;
            transition: width 0.1s linear;
        }
    </style>
    <script type="module" src="assets/js/firebase.js"></script>
    <script src="assets/js/checkout.js"></script>
</head>
<body class="antialiased" x-data="{ lang: 'et' }">

    <!-- Preloader -->
    <div class="preloader" id="preloader">
        <div class="preloader-logo">SUKODA</div>
    </div>

    <!-- Scroll Progress -->
    <div class="scroll-progress" id="scrollProgress"></div>

    <!-- Grid Container -->
    <div class="max-w-[1440px] mx-auto bg-paper min-h-screen border-x border-[#E8E3DD]">
        
        <!-- Navigation -->
        <nav class="sticky top-0 z-50 bg-paper/95 backdrop-blur-sm grid-line-b" x-data="{ mobileMenu: false }">
            <div class="flex justify-between items-center h-16 md:h-20 px-4 md:px-12">
                <a href="#" class="font-serif text-2xl md:text-3xl tracking-[0.08em] font-light">
                    SUKODA
                </a>
                
                <div class="hidden md:flex gap-10 text-[11px] uppercase tracking-[0.2em] font-sans font-medium text-muted">
                    <a href="kingitus.html" class="luxury-link hover:text-black transition-colors" x-text="lang === 'et' ? 'Kingitus' : 'Gift'">Kingitus</a>
                    <a href="partnerlus.html" class="luxury-link hover:text-black transition-colors" x-text="lang === 'et' ? 'Koostöö' : 'Partnership'">Koostöö</a>
                </div>

                <div class="flex items-center gap-4 md:gap-6">
                    <div class="flex text-[10px] uppercase tracking-[0.2em] font-sans font-medium gap-2">
                        <button @click="lang = 'et'" :class="lang === 'et' ? 'text-black' : 'text-muted hover:text-black'" class="transition-colors">ET</button>
                        <span class="text-[#D4CFC8]">/</span>
                        <button @click="lang = 'en'" :class="lang === 'en' ? 'text-black' : 'text-muted hover:text-black'" class="transition-colors">EN</button>
                    </div>

                    <a href="#liitu" class="hidden md:inline-block text-[11px] uppercase tracking-[0.2em] font-sans font-medium border-b border-accent text-accent pb-0.5 hover:text-black hover:border-black transition-all" x-text="lang === 'et' ? 'Alusta' : 'Begin'">
                        Alusta
                    </a>

                    <!-- Mobile Menu Button -->
                    <button @click="mobileMenu = !mobileMenu" class="md:hidden p-2">
                        <svg x-show="!mobileMenu" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                        <svg x-show="mobileMenu" x-cloak class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Mobile Menu -->
            <div x-show="mobileMenu" x-cloak class="md:hidden bg-paper border-t border-[#E8E3DD]">
                <div class="flex flex-col px-4 py-8 space-y-5 text-[11px] uppercase tracking-[0.2em] font-sans font-medium text-muted">
                    <a href="kingitus.html" class="py-2 hover:text-black" x-text="lang === 'et' ? 'Kingitus' : 'Gift'">Kingitus</a>
                    <a href="partnerlus.html" class="py-2 hover:text-black" x-text="lang === 'et' ? 'Koostöö' : 'Partnership'">Koostöö</a>
                    <a href="#liitu" @click="mobileMenu = false" class="py-2 text-accent" x-text="lang === 'et' ? 'Alusta' : 'Begin'">Alusta</a>
                </div>
            </div>
        </nav>

        <!-- Test Mode Banner -->
        <div x-data="{ testMode: new URLSearchParams(window.location.search).get('test') === '1' }" x-show="testMode" x-cloak class="bg-accent/10 text-accent py-3 px-4 text-center border-b border-accent/20">
            <p class="text-xs font-sans tracking-widest uppercase">Test mode — €1 testtellimus saadaval</p>
        </div>

        <!-- Hero Section -->
        <header class="relative min-h-[85vh] md:min-h-[90vh] grid-line-b overflow-hidden">
            <!-- Background Image -->
            <div class="absolute inset-0 animate-hero-image">
                <img src="assets/images/hero-luxury.jpg" alt="Minimalist luxury interior" class="w-full h-full object-cover">
                <div class="absolute inset-0 bg-gradient-to-r from-paper via-paper/85 to-paper/40"></div>
            </div>
            
            <!-- Content -->
            <div class="relative z-10 max-w-4xl px-6 md:px-16 py-24 md:py-32 flex flex-col justify-center min-h-[85vh] md:min-h-[90vh]">
                <div class="accent-line mb-8 animate-fade-in"></div>
                <h1 class="font-serif text-5xl md:text-7xl lg:text-[5.5rem] leading-[1.08] mb-8 md:mb-10 font-light animate-hero-title">
                    <span x-show="lang === 'et'">Kodu, mis<br>Sind ootab.</span>
                    <span x-show="lang === 'en'" x-cloak>A home that<br>awaits you.</span>
                </h1>
                <p class="text-base md:text-lg text-muted max-w-md font-sans font-light leading-relaxed animate-hero-subtitle">
                    <span x-show="lang === 'et'">Astud sisse ja kõik on paigas. Lilled vaasis, puuviljad kausis, laual ootab käsitsi kirjutatud tervitus.</span>
                    <span x-show="lang === 'en'" x-cloak>You walk in and everything is in place. Flowers in a vase, fruits in a bowl, and a handwritten note waiting on the table.</span>
                </p>
                <div class="mt-10 md:mt-14 animate-hero-cta">
                    <a href="#hoolitsus" class="inline-block bg-black text-paper px-8 py-4 text-[11px] uppercase tracking-[0.2em] font-sans hover:bg-accent transition-colors duration-500" x-text="lang === 'et' ? 'Avasta' : 'Discover'">
                        Avasta
                    </a>
                </div>
            </div>
        </header>

        <!-- Small Ritual Banner -->
        <section class="grid-line-b py-6 md:py-8 px-6 md:px-16 bg-cream/50 reveal">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                <div class="flex items-center gap-4">
                    <p class="font-serif text-xl md:text-2xl font-light italic text-muted">
                        <span x-show="lang === 'et'">Väike rituaal igal korral.</span>
                        <span x-show="lang === 'en'" x-cloak>A small ritual every time.</span>
                    </p>
                    <span class="text-[9px] uppercase tracking-[0.2em] text-accent font-sans border border-accent/30 px-2.5 py-1 whitespace-nowrap" x-text="lang === 'et' ? 'Praegu Tallinnas' : 'Now in Tallinn'">Praegu Tallinnas</span>
                </div>
                <p class="text-xs font-sans text-muted/60 tracking-wide max-w-sm">
                    <span x-show="lang === 'et'">Värsked lilled Fleur Royale'ilt. Hooajalised puuviljad. Käsitsi kirjutatud kaart. Ja väike magus üllatus.</span>
                    <span x-show="lang === 'en'" x-cloak>Fresh flowers by Fleur Royale. Seasonal fruits. A handwritten card. And a small sweet surprise.</span>
                </p>
            </div>
        </section>

        <!-- Manifesto / Philosophy -->
        <section id="filosoofia" class="grid md:grid-cols-12 grid-line-b">
            <div class="md:col-span-4 p-6 md:p-12 grid-line border-b md:border-b-0 border-[#E8E3DD] reveal">
                <div class="accent-line mb-4"></div>
                <span class="text-[10px] uppercase tracking-[0.25em] text-muted font-sans block mb-3">( 01 )</span>
                <h2 class="font-serif text-2xl md:text-3xl font-light" x-text="lang === 'et' ? 'Miks me seda teeme' : 'Why we do this'">Miks me seda teeme</h2>
            </div>
            <div class="md:col-span-8 p-6 md:p-20 lg:p-24 reveal">
                <p class="text-xl md:text-3xl font-serif font-light leading-relaxed mb-10 md:mb-14">
                    <span x-show="lang === 'et'">Sest kodu ei peaks olema veel üks asi, mille pärast muretseda. <br><span class="text-muted/50">Kodu peaks olema koht, kus sa hingad välja.</span></span>
                    <span x-show="lang === 'en'" x-cloak>Because home shouldn't be another thing to worry about. <br><span class="text-muted/50">Home should be where you breathe out.</span></span>
                </p>
                <div class="grid md:grid-cols-2 gap-8 md:gap-14 font-sans text-sm leading-relaxed text-muted mb-10 md:mb-14">
                    <div>
                        <h4 class="text-[10px] uppercase tracking-[0.25em] text-black mb-3 font-medium" x-text="lang === 'et' ? 'Tuttav tunne' : 'A familiar feeling'">Tuttav tunne</h4>
                        <p class="font-light" x-show="lang === 'et'">Tead seda hetke, kui astud hotellituppa ja kõik on puhas, värske, ootamas just sind? Me toome selle tunde sinu koju. Iga kord.</p>
                        <p class="font-light" x-show="lang === 'en'" x-cloak>You know that moment when you enter a hotel room and everything is clean, fresh, waiting just for you? We bring that feeling to your home. Every time.</p>
                    </div>
                    <div>
                        <h4 class="text-[10px] uppercase tracking-[0.25em] text-black mb-3 font-medium" x-text="lang === 'et' ? 'Meie lubadus' : 'Our promise'">Meie lubadus</h4>
                        <p class="font-light" x-show="lang === 'et'">Üks tuttav nägu, kes tunneb sinu kodu. Kes teab, et kohvitassid käivad riiuli vasakusse nurka. Kes märkab, kui midagi on teisiti.</p>
                        <p class="font-light" x-show="lang === 'en'" x-cloak>One familiar face who knows your home. Who knows coffee cups belong in the left corner. Who notices when something is different.</p>
                    </div>
                </div>
                <div class="relative h-[350px] w-full overflow-hidden">
                    <img src="assets/images/interior-luxury.jpg" alt="Minimal clean interior" class="w-full h-full object-cover grayscale hover:grayscale-0 transition-all duration-1000">
                </div>
            </div>
        </section>

        <!-- SUKODA Hoolitsus -->
        <section id="hoolitsus" class="grid-line-b" x-data="{ 
            size: 'medium',
            rhythm: 'twice',
            prices: {
                small: { once: 119, twice: 199, weekly: 379 },
                medium: { once: 149, twice: 249, weekly: 449 },
                large: { once: 189, twice: 319, weekly: 579 },
                xlarge: { once: 229, twice: 389, weekly: 699 }
            }
        }">
            <!-- Controls -->
            <div class="grid md:grid-cols-12 grid-line-b reveal">
                <div class="md:col-span-4 p-6 md:p-12 grid-line flex items-center border-b md:border-b-0 border-[#E8E3DD]">
                    <div>
                        <div class="accent-line mb-4"></div>
                        <span class="text-[10px] uppercase tracking-[0.25em] text-muted font-sans block mb-3">( 02 )</span>
                        <h2 class="font-serif text-2xl md:text-3xl font-light" x-text="lang === 'et' ? 'Vali oma rütm' : 'Choose your rhythm'">Vali oma rütm</h2>
                    </div>
                </div>
                <div class="md:col-span-8 p-4 md:p-12 flex flex-col md:flex-row md:items-center gap-3 md:gap-6 overflow-x-auto">
                    <span class="text-[10px] uppercase tracking-[0.25em] text-muted font-sans whitespace-nowrap" x-text="lang === 'et' ? 'Sinu kodu:' : 'Your home:'">Sinu kodu:</span>
                    <div class="flex gap-3 md:gap-5 font-sans text-xs whitespace-nowrap overflow-x-auto pb-2 md:pb-0">
                        <button @click="size = 'small'" :class="size === 'small' ? 'text-black border-b border-accent' : 'text-muted hover:text-black transition-colors'" class="pb-1" x-text="lang === 'et' ? 'Kuni 50m²' : 'Up to 50m²'">Kuni 50m²</button>
                        <button @click="size = 'medium'" :class="size === 'medium' ? 'text-black border-b border-accent' : 'text-muted hover:text-black transition-colors'" class="pb-1">51–90m²</button>
                        <button @click="size = 'large'" :class="size === 'large' ? 'text-black border-b border-accent' : 'text-muted hover:text-black transition-colors'" class="pb-1">91–120m²</button>
                        <button @click="size = 'xlarge'" :class="size === 'xlarge' ? 'text-black border-b border-accent' : 'text-muted hover:text-black transition-colors'" class="pb-1">121–150m²</button>
                        <button @click="size = 'estate'" :class="size === 'estate' ? 'text-black border-b border-accent' : 'text-muted hover:text-black transition-colors'" class="pb-1">151m²+</button>
                    </div>
                </div>
            </div>

            <!-- Three Rhythms -->
            <div class="grid md:grid-cols-3 reveal">
                
                <!-- Kord kuus -->
                <div class="p-6 md:p-14 lg:p-16 grid-line border-b md:border-b-0 border-[#E8E3DD] transition-all duration-500 group relative flex flex-col cursor-pointer"
                     :class="rhythm === 'once' ? 'bg-cream/70 ring-1 ring-accent/30' : 'hover:bg-cream/30'"
                     @click="rhythm = 'once'; $dispatch('select-plan', { plan: size === 'estate' ? 'RÄTSEPLAHENDUS' : 'KORD KUUS (' + (size==='small'?'kuni 50m²':size==='medium'?'51-90m²':size==='large'?'91-120m²':'121-150m²') + ')' })">
                    <span class="text-[10px] uppercase tracking-[0.25em] font-sans mb-6 md:mb-8 block" :class="rhythm === 'once' ? 'text-black' : 'text-muted'" x-text="lang === 'et' ? 'Üks kord kuus' : 'Once a month'">Üks kord kuus</span>
                    <div class="font-serif text-4xl md:text-5xl font-light mb-2">
                        <span x-show="size !== 'estate'" x-text="lang === 'et' ? 'Kord kuus' : 'Monthly'">Kord kuus</span>
                        <span x-show="size === 'estate'" class="text-2xl" x-text="lang === 'et' ? 'Rätseplahendus' : 'Bespoke'">Rätseplahendus</span>
                    </div>
                    <div class="flex items-baseline gap-1 mb-8 md:mb-10" x-show="size !== 'estate'">
                        <span class="font-serif text-lg text-muted">€</span>
                        <span class="font-serif text-2xl" x-text="prices[size].once">149</span>
                        <span class="text-xs text-muted font-sans">/kuu</span>
                    </div>
                    <div class="mb-8 md:mb-10" x-show="size === 'estate'" x-cloak>
                        <p class="font-serif text-xl italic text-accent" x-text="lang === 'et' ? 'Räägime läbi' : 'Let\'s talk'">Räägime läbi</p>
                    </div>
                    
                    <p class="font-sans text-sm font-light leading-relaxed mb-auto pb-10" :class="rhythm === 'once' ? 'text-muted' : 'text-muted/70'">
                        <span x-show="lang === 'et'">Üks täiuslik külastus kuus. Koju tulles ootavad lilled, kaart ja see eriline tunne.</span>
                        <span x-show="lang === 'en'" x-cloak>One perfect visit per month. Flowers, a card, and that special feeling await when you come home.</span>
                    </p>

                    <!-- Selected state -->
                    <div x-show="rhythm === 'once'" class="flex items-center justify-center gap-2 w-full py-4 text-accent">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <span class="text-[11px] uppercase tracking-[0.2em] font-sans" x-text="lang === 'et' ? 'Valitud' : 'Selected'">Valitud</span>
                    </div>
                    <!-- Unselected state -->
                    <div x-show="rhythm !== 'once'" class="block w-full text-center border border-black/30 py-4 text-[11px] uppercase tracking-[0.2em] font-sans text-muted hover:border-black hover:text-black transition-all duration-500" x-text="lang === 'et' ? (size === 'estate' ? 'Räägi meiega' : 'Vali see rütm') : (size === 'estate' ? 'Talk to us' : 'Choose this rhythm')">
                        Vali see rütm
                    </div>
                </div>

                <!-- Üle nädala -->
                <div class="p-6 md:p-14 lg:p-16 transition-all duration-500 relative flex flex-col border-b md:border-b-0 border-[#E8E3DD] cursor-pointer"
                     :class="rhythm === 'twice' ? 'bg-cream/70 ring-1 ring-accent/30' : 'bg-cream/30 hover:bg-cream/50'"
                     @click="rhythm = 'twice'; $dispatch('select-plan', { plan: size === 'estate' ? 'RÄTSEPLAHENDUS' : 'ÜLE NÄDALA (' + (size==='small'?'kuni 50m²':size==='medium'?'51-90m²':size==='large'?'91-120m²':'121-150m²') + ')' })">
                    <div class="absolute top-4 right-4 md:top-6 md:right-6">
                        <span class="text-[10px] uppercase tracking-[0.25em] text-accent font-sans border border-accent/40 px-3 py-1" x-text="lang === 'et' ? 'Soovitame' : 'Recommended'">Soovitame</span>
                    </div>
                    <span class="text-[10px] uppercase tracking-[0.25em] font-sans mb-6 md:mb-8 block" :class="rhythm === 'twice' ? 'text-black' : 'text-muted'" x-text="lang === 'et' ? 'Kaks korda kuus' : 'Twice a month'">Kaks korda kuus</span>
                    <div class="font-serif text-4xl md:text-5xl font-light mb-2">
                        <span x-show="size !== 'estate'" x-text="lang === 'et' ? 'Üle nädala' : 'Biweekly'">Üle nädala</span>
                        <span x-show="size === 'estate'" class="text-2xl" x-text="lang === 'et' ? 'Rätseplahendus' : 'Bespoke'">Rätseplahendus</span>
                    </div>
                    <div class="flex items-baseline gap-1 mb-8 md:mb-10" x-show="size !== 'estate'">
                        <span class="font-serif text-lg text-muted">€</span>
                        <span class="font-serif text-2xl" x-text="prices[size].twice">249</span>
                        <span class="text-xs text-muted font-sans">/kuu</span>
                    </div>
                    <div class="mb-8 md:mb-10" x-show="size === 'estate'" x-cloak>
                        <p class="font-serif text-xl italic text-accent" x-text="lang === 'et' ? 'Räägime läbi' : 'Let\'s talk'">Räägime läbi</p>
                    </div>

                    <p class="font-sans text-sm font-light leading-relaxed mb-8 pb-2" :class="rhythm === 'twice' ? 'text-muted' : 'text-muted/70'">
                        <span x-show="lang === 'et'">Iga kahe nädala tagant värskus. Lilled, puuviljad ja tunne, et keegi hoolib. Pidevalt.</span>
                        <span x-show="lang === 'en'" x-cloak>Freshness every two weeks. Flowers, fruits, and the feeling that someone cares. Continuously.</span>
                    </p>

                    <div class="mb-auto pb-10 py-3 border-t border-[#E8E3DD]">
                        <p class="text-[10px] uppercase tracking-[0.25em] text-muted font-sans mb-2" x-text="lang === 'et' ? 'Lisaks põhiteenusele' : 'In addition'">Lisaks põhiteenusele</p>
                        <p class="text-sm font-sans font-light" x-text="lang === 'et' ? '+ Hooajalised puuviljad kausis' : '+ Seasonal fruits in a bowl'">+ Hooajalised puuviljad kausis</p>
                    </div>

                    <!-- Selected state -->
                    <div x-show="rhythm === 'twice'" class="flex items-center justify-center gap-2 w-full py-4 text-accent">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <span class="text-[11px] uppercase tracking-[0.2em] font-sans" x-text="lang === 'et' ? 'Valitud' : 'Selected'">Valitud</span>
                    </div>
                    <!-- Unselected state -->
                    <div x-show="rhythm !== 'twice'" class="block w-full text-center border border-black/30 py-4 text-[11px] uppercase tracking-[0.2em] font-sans text-muted hover:border-black hover:text-black transition-all duration-500" x-text="lang === 'et' ? (size === 'estate' ? 'Räägi meiega' : 'Vali see rütm') : (size === 'estate' ? 'Talk to us' : 'Choose this rhythm')">
                        Vali see rütm
                    </div>
                </div>

                <!-- Iga nädal -->
                <div class="p-6 md:p-14 lg:p-16 transition-all duration-500 relative flex flex-col cursor-pointer"
                     :class="rhythm === 'weekly' ? 'bg-cream/70 ring-1 ring-accent/30' : 'bg-cream/30 hover:bg-cream/50'"
                     @click="rhythm = 'weekly'; $dispatch('select-plan', { plan: size === 'estate' ? 'RÄTSEPLAHENDUS' : 'IGA NÄDAL (' + (size==='small'?'kuni 50m²':size==='medium'?'51-90m²':size==='large'?'91-120m²':'121-150m²') + ')' })">
                    <span class="text-[10px] uppercase tracking-[0.25em] font-sans mb-6 md:mb-8 block" :class="rhythm === 'weekly' ? 'text-black' : 'text-muted'" x-text="lang === 'et' ? 'Neli korda kuus' : 'Four times a month'">Neli korda kuus</span>
                    <div class="font-serif text-4xl md:text-5xl font-light mb-2">
                        <span x-show="size !== 'estate'" x-text="lang === 'et' ? 'Iga nädal' : 'Weekly'">Iga nädal</span>
                        <span x-show="size === 'estate'" class="text-2xl" x-text="lang === 'et' ? 'Rätseplahendus' : 'Bespoke'">Rätseplahendus</span>
                    </div>
                    <div class="flex items-baseline gap-1 mb-8 md:mb-10" x-show="size !== 'estate'">
                        <span class="font-serif text-lg text-muted">€</span>
                        <span class="font-serif text-2xl" x-text="prices[size].weekly">449</span>
                        <span class="text-xs text-muted font-sans">/kuu</span>
                    </div>
                    <div class="mb-8 md:mb-10" x-show="size === 'estate'" x-cloak>
                        <p class="font-serif text-xl italic text-accent" x-text="lang === 'et' ? 'Räägime läbi' : 'Let\'s talk'">Räägime läbi</p>
                    </div>

                    <p class="font-sans text-sm font-light leading-relaxed mb-8 pb-2" :class="rhythm === 'weekly' ? 'text-muted' : 'text-muted/70'">
                        <span x-show="lang === 'et'">Täielik vabadus. Iga nädal värske kodu, lilled, puuviljad. Sa ei mõtle enam kodutöödele.</span>
                        <span x-show="lang === 'en'" x-cloak>Complete freedom. Every week a fresh home, flowers, fruits. You never think about housework again.</span>
                    </p>

                    <div class="mb-auto pb-10 py-3 border-t border-[#E8E3DD]">
                        <p class="text-[10px] uppercase tracking-[0.25em] text-muted font-sans mb-2" x-text="lang === 'et' ? 'Lisaks põhiteenusele' : 'In addition'">Lisaks põhiteenusele</p>
                        <p class="text-sm font-sans font-light" x-text="lang === 'et' ? '+ Puuviljad + Taimede kastmine' : '+ Fruits + Plant watering'">+ Puuviljad + Taimede kastmine</p>
                    </div>

                    <!-- Selected state -->
                    <div x-show="rhythm === 'weekly'" class="flex items-center justify-center gap-2 w-full py-4 text-accent">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <span class="text-[11px] uppercase tracking-[0.2em] font-sans" x-text="lang === 'et' ? 'Valitud' : 'Selected'">Valitud</span>
                    </div>
                    <!-- Unselected state -->
                    <div x-show="rhythm !== 'weekly'" class="block w-full text-center border border-black/30 py-4 text-[11px] uppercase tracking-[0.2em] font-sans text-muted hover:border-black hover:text-black transition-all duration-500" x-text="lang === 'et' ? (size === 'estate' ? 'Räägi meiega' : 'Vali see rütm') : (size === 'estate' ? 'Talk to us' : 'Choose this rhythm')">
                        Vali see rütm
                    </div>
                </div>

                <!-- TEST €1 Option (only in test mode) -->
                <div x-data="{ testMode: new URLSearchParams(window.location.search).get('test') === '1' }" x-show="testMode" x-cloak class="p-6 md:p-14 lg:p-16 hover:bg-cream/30 transition-all duration-500 relative flex flex-col bg-accent/5 border-2 border-accent/30">
                    <div class="absolute top-4 right-4 md:top-6 md:right-6">
                        <span class="text-[10px] uppercase tracking-[0.25em] text-accent font-sans font-medium">Test</span>
                    </div>
                    <span class="text-[10px] uppercase tracking-[0.25em] text-muted font-sans mb-6 md:mb-8 block">Testtellimus</span>
                    <div class="font-serif text-4xl md:text-5xl font-light mb-2">Test</div>
                    <div class="flex items-baseline gap-1 mb-8 md:mb-10">
                        <span class="font-serif text-lg text-muted">€</span>
                        <span class="font-serif text-2xl">1</span>
                        <span class="text-xs text-muted font-sans">/kuu</span>
                    </div>
                    
                    <p class="text-muted font-sans text-sm font-light leading-relaxed mb-auto pb-10">
                        Testtellimus päris maksega. Testi kogu voogu €1 eest.
                    </p>

                    <a href="#liitu" @click="$dispatch('select-plan', { plan: 'TEST (' + (size==='small'?'kuni 50m²':size==='medium'?'51-90m²':size==='large'?'91-120m²':'121-150m²') + ')' })" class="block w-full text-center bg-accent text-paper py-4 text-[11px] uppercase tracking-[0.2em] font-sans hover:bg-black transition-all duration-500 font-medium">
                        Testi €1 maksega
                    </a>
                </div>
            </div>
        </section>

        <!-- Emotional Section -->
        <section class="grid md:grid-cols-12 grid-line-b">
            <div class="md:col-span-5 p-6 md:p-20 lg:p-24 grid-line border-b md:border-b-0 border-[#E8E3DD] reveal">
                <div class="accent-line mb-4"></div>
                <span class="text-[10px] uppercase tracking-[0.25em] text-muted font-sans block mb-3">( 03 )</span>
                <h2 class="font-serif text-2xl md:text-4xl font-light mb-6" x-text="lang === 'et' ? 'See tunne' : 'That feeling'">See tunne</h2>
                <p class="text-muted font-sans font-light leading-relaxed text-sm">
                    <span x-show="lang === 'et'">Avad ukse ja kõik on paigas. Põrandad säravad, voodipesu on värske, lilled ootavad vaasis. Mitte sellepärast, et sa pidid. Vaid sellepärast, et keegi hoolis.</span>
                    <span x-show="lang === 'en'" x-cloak>You open the door and everything is in place. Floors gleaming, fresh linens, flowers waiting in a vase. Not because you had to. But because someone cared.</span>
                </p>
            </div>
            <div class="md:col-span-7 p-6 md:p-20 lg:p-24 flex items-center justify-center bg-cream/30 reveal">
                <p class="font-serif text-2xl md:text-4xl text-center text-muted/50 italic leading-relaxed font-light">
                    <span x-show="lang === 'et'">"Koju jõudes <br class="md:hidden">on kõik juba tehtud."</span>
                    <span x-show="lang === 'en'" x-cloak>"When you arrive home, <br class="md:hidden">it's already done."</span>
                </p>
            </div>
        </section>

        <!-- Trust Section -->
        <section id="protsess" class="grid md:grid-cols-12 grid-line-b">
            <div class="md:col-span-4 p-6 md:p-12 grid-line border-b md:border-b-0 border-[#E8E3DD] reveal">
                <div class="accent-line mb-4"></div>
                <span class="text-[10px] uppercase tracking-[0.25em] text-muted font-sans block mb-3">( 04 )</span>
                <h2 class="font-serif text-2xl md:text-3xl font-light" x-text="lang === 'et' ? 'Meie lubadused' : 'Our promises'">Meie lubadused</h2>
            </div>
            <div class="md:col-span-8 p-6 md:p-20 lg:p-24 reveal">
                <div class="grid md:grid-cols-2 gap-10 md:gap-16">
                    <div>
                        <h3 class="font-serif text-xl font-light mb-4" x-text="lang === 'et' ? 'Alati sama nägu' : 'Always the same face'">Alati sama nägu</h3>
                        <p class="text-muted font-sans text-sm font-light leading-relaxed">
                            <span x-show="lang === 'et'">Mitte keegi võõras. Sinu kodu tunneb üks inimene — kes teab, et kohvitassid käivad riiuli vasakusse nurka ja et magamistoa kardinad peavad olema täpselt poolenisti.</span>
                            <span x-show="lang === 'en'" x-cloak>Not a stranger. One person knows your home — who knows coffee cups go in the left corner and bedroom curtains must be exactly half-open.</span>
                        </p>
                    </div>
                    <div>
                        <h3 class="font-serif text-xl font-light mb-4" x-text="lang === 'et' ? 'Sinu rütm' : 'Your rhythm'">Sinu rütm</h3>
                        <p class="text-muted font-sans text-sm font-light leading-relaxed">
                            <span x-show="lang === 'et'">Lepime kokku ajakohaselt — kas oled kodus või ei. Oluline on, et tuled koju ja kõik on tehtud.</span>
                            <span x-show="lang === 'en'" x-cloak>We agree on timing — whether you're home or not. What matters is that you come home and everything is done.</span>
                        </p>
                    </div>
                    <div>
                        <h3 class="font-serif text-xl font-light mb-4" x-text="lang === 'et' ? 'Meie sõna' : 'Our word'">Meie sõna</h3>
                        <p class="text-muted font-sans text-sm font-light leading-relaxed">
                            <span x-show="lang === 'et'">Kui miski pole päris nii nagu peaks — ütle meile. Tuleme tagasi ja teeme korda. Tasuta, ilma küsimusteta.</span>
                            <span x-show="lang === 'en'" x-cloak>If something isn't quite right — tell us. We'll come back and fix it. Free, no questions asked.</span>
                        </p>
                    </div>
                    <div>
                        <h3 class="font-serif text-xl font-light mb-4" x-text="lang === 'et' ? 'Meie vahel' : 'Between us'">Meie vahel</h3>
                        <p class="text-muted font-sans text-sm font-light leading-relaxed">
                            <span x-show="lang === 'et'">Sinu kodu on sinu eraasi. Me ei räägi sellest kellelegi. Mitte kunagi.</span>
                            <span x-show="lang === 'en'" x-cloak>Your home is your private matter. We don't talk about it to anyone. Ever.</span>
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Step-by-step Process -->
        <section id="liitu" class="grid md:grid-cols-12 grid-line-b bg-paper" x-data="{ 
            step: 2,
            selectedPackage: 'ÜLE NÄDALA (51-90m²)',
            selectedSize: 'medium',
            selectedRhythm: 'twice',
            isEstate: false,
            name: '', 
            email: '', 
            phone: '', 
            address: '',
            additionalInfo: '',
            nameError: false,
            emailError: false,
            addressError: false,
            phoneError: false,
            isProcessing: false,
            inquirySent: false,
            checkoutError: '',
            showWaitlist: false,
            waitlistCity: '',
            waitlistEmail: '',
            waitlistSent: false,
            waitlistSending: false,
            addressSuggestions: [],
            showSuggestions: false,
            addressMunicipality: '',
            addressSearchTimer: null,
            testMode: new URLSearchParams(window.location.search).get('test') === '1',
            prices: {
                small: { once: 119, twice: 199, weekly: 379, test: 1 },
                medium: { once: 149, twice: 249, weekly: 449, test: 1 },
                large: { once: 189, twice: 319, weekly: 579, test: 1 },
                xlarge: { once: 229, twice: 389, weekly: 699, test: 1 }
            },
            validateEmail() {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                this.emailError = this.email && !emailRegex.test(this.email);
                return !this.emailError;
            },
            validatePhone() {
                const phoneRegex = /^[+]?[0-9\s-]{8,}$/;
                this.phoneError = this.phone && !phoneRegex.test(this.phone);
                return !this.phoneError;
            },
            validateAddress() {
                if (!this.address || this.address.trim().length < 5) {
                    this.addressError = !!this.address;
                    return !this.addressError;
                }
                // If we have a municipality from the API, the address is valid
                if (this.addressMunicipality) {
                    this.addressError = false;
                    return true;
                }
                // Fallback: basic structure check
                const hasMinLength = this.address.trim().length >= 10;
                const hasStructure = /[a-zA-ZäöüõÄÖÜÕ]+.*\d+/i.test(this.address);
                this.addressError = !hasMinLength || !hasStructure;
                return !this.addressError;
            },
            isInTallinn() {
                // API-based: check municipality from In-ADS
                if (this.addressMunicipality) {
                    const tallinnArea = ['tallinn', 'viimsi vald', 'harku vald', 'rae vald', 'saue vald', 'kiili vald', 'jõelähtme vald', 'saku vald'];
                    return tallinnArea.includes(this.addressMunicipality.toLowerCase());
                }
                // Fallback if no API result yet
                if (!this.address) return true;
                const addr = this.address.toLowerCase();
                return addr.includes('tallinn');
            },
            searchAddress() {
                clearTimeout(this.addressSearchTimer);
                this.addressMunicipality = '';
                this.showWaitlist = false;
                if (!this.address || this.address.trim().length < 3) {
                    this.addressSuggestions = [];
                    this.showSuggestions = false;
                    return;
                }
                this.addressSearchTimer = setTimeout(async () => {
                    try {
                        const res = await fetch(`https://inaadress.maaamet.ee/inaadress/gazetteer?address=${encodeURIComponent(this.address)}&results=5`);
                        const data = await res.json();
                        this.addressSuggestions = (data.addresses || []).map(a => ({
                            display: a.ipikkaadress || a.pikkaadress,
                            full: a.pikkaadress,
                            municipality: a.omavalitsus,
                            county: a.maakond,
                            district: a.asustusyksus || '',
                        }));
                        this.showSuggestions = this.addressSuggestions.length > 0;
                    } catch (e) {
                        console.log('Address search error:', e);
                        this.showSuggestions = false;
                    }
                }, 300);
            },
            selectAddress(suggestion) {
                this.address = suggestion.display;
                this.addressMunicipality = suggestion.municipality;
                this.waitlistCity = suggestion.municipality;
                this.addressSuggestions = [];
                this.showSuggestions = false;
                this.addressError = false;
                // Check if outside Tallinn area
                if (!this.isInTallinn()) {
                    this.showWaitlist = true;
                }
            },
            async submitWaitlist() {
                if (!this.waitlistEmail || !this.waitlistCity) return;
                this.waitlistSending = true;
                try {
                    await fetch('/api/waitlist', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            email: this.waitlistEmail || this.email,
                            name: this.name,
                            city: this.waitlistCity,
                            address: this.address,
                            lang: this.$data.lang || 'et',
                        }),
                    });
                } catch (e) { console.log('Waitlist saved locally'); }
                this.waitlistSent = true;
                this.waitlistSending = false;
            },
            validateForm() {
                this.nameError = !this.name.trim();
                this.validateEmail();
                if (!this.email.trim()) this.emailError = true;
                if (this.isEstate) {
                    return !this.nameError && !this.emailError;
                }
                this.validatePhone();
                if (!this.phone.trim()) this.phoneError = true;
                this.validateAddress();
                if (!this.address.trim()) this.addressError = true;
                return !this.nameError && !this.emailError && !this.phoneError && !this.addressError;
            },
            nextStep() {
                if (this.step === 1 && this.selectedPackage) {
                    this.step = 2;
                    // Track ViewContent when viewing details
                    if (window.SUKODA_TRACKING) {
                        SUKODA_TRACKING.trackViewContent({
                            name: this.selectedPackage,
                            category: 'subscription',
                            value: this.getTotalPrice(),
                        });
                    }
                } else if (this.step === 2) {
                    if (this.validateForm()) {
                        if (this.isEstate) {
                            this.sendInquiry();
                        } else {
                            this.step = 3;
                            // Track InitiateCheckout
                            if (window.SUKODA_TRACKING) {
                                SUKODA_TRACKING.trackInitiateCheckout({
                                    name: this.selectedPackage,
                                    category: 'subscription',
                                    value: this.getTotalPrice(),
                                });
                            }
                        }
                    }
                }
            },
            async sendInquiry() {
                this.isProcessing = true;
                try {
                    // Track as Lead
                    if (window.SUKODA_TRACKING) {
                        SUKODA_TRACKING.trackLead({ name: 'Rätseplahendus 151m²+', category: 'estate_inquiry' });
                    }
                    const subject = encodeURIComponent('SUKODA rätseplahendus – ' + this.name);
                    const body = encodeURIComponent('Nimi: ' + this.name + '\nE-post: ' + this.email + (this.phone ? '\nTelefon: ' + this.phone : '') + (this.additionalInfo ? '\n\nLisainfo: ' + this.additionalInfo : ''));
                    window.location.href = 'mailto:tere@sukoda.ee?subject=' + subject + '&body=' + body;
                    this.inquirySent = true;
                } catch(e) {
                    this.checkoutError = 'Tekkis viga. Palun proovi uuesti.';
                } finally {
                    this.isProcessing = false;
                }
            },
            prevStep() {
                if (this.step > 1) this.step--;
            },
            getTotalPrice() {
                if (!this.selectedRhythm || !this.selectedSize) return 0;
                return this.prices[this.selectedSize][this.selectedRhythm] || 0;
            },
            async startPayment() {
                if (this.isProcessing) return;
                this.isProcessing = true;
                this.checkoutError = '';
                
                try {
                    await SUKODA.startSubscriptionCheckout({
                        rhythm: this.selectedRhythm,
                        size: this.selectedSize,
                        customer: {
                            name: this.name,
                            email: this.email,
                            phone: this.phone,
                            address: this.address,
                            additionalInfo: this.additionalInfo,
                        },
                        lang: this.$data.lang || 'et',
                    });
                } catch (error) {
                    console.error('Checkout error:', error);
                    this.checkoutError = this.$data.lang === 'en' 
                        ? 'An error occurred. Please try again.' 
                        : 'Tekkis viga. Palun proovi uuesti.';
                    this.isProcessing = false;
                }
            }
        }" @select-plan.window="
            selectedPackage = $event.detail.plan;
            isEstate = $event.detail.plan.includes('RÄTSEPLAHENDUS');
            if (!isEstate) {
                const rhythmMatch = $event.detail.plan.match(/(KORD KUUS|ÜLE NÄDALA|IGA NÄDAL|TEST)/i);
                if (rhythmMatch) {
                    if (rhythmMatch[0].includes('TEST')) selectedRhythm = 'test';
                    else if (rhythmMatch[0].includes('KORD')) selectedRhythm = 'once';
                    else if (rhythmMatch[0].includes('ÜLE')) selectedRhythm = 'twice';
                    else if (rhythmMatch[0].includes('IGA')) selectedRhythm = 'weekly';
                }
                const sizeMatch = $event.detail.plan.match(/(kuni 50m²|51-90m²|91-120m²|121-150m²)/i);
                if (sizeMatch) {
                    if (sizeMatch[0].includes('50')) selectedSize = 'small';
                    else if (sizeMatch[0].includes('51')) selectedSize = 'medium';
                    else if (sizeMatch[0].includes('91')) selectedSize = 'large';
                    else if (sizeMatch[0].includes('121')) selectedSize = 'xlarge';
                }
            }
            step = 2;
            inquirySent = false;
        ">
            
            <!-- Progress Steps -->
            <div class="md:col-span-12 px-6 md:px-24 pt-12 pb-8 border-b border-[#E8E3DD]" x-show="!isEstate">
                <div class="flex items-center justify-center gap-4 md:gap-8 max-w-2xl mx-auto">
                    <div class="flex items-center gap-3">
                        <div :class="step >= 1 ? 'bg-black text-paper' : 'bg-[#E8E3DD] text-muted'" class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-serif">1</div>
                        <span class="text-[10px] uppercase tracking-[0.2em] font-sans hidden md:inline" :class="step >= 1 ? 'text-black' : 'text-muted'" x-text="lang === 'et' ? 'Vali rütm' : 'Choose rhythm'">Vali rütm</span>
                    </div>
                    <div class="h-[1px] flex-1" :class="step >= 2 ? 'bg-black' : 'bg-[#E8E3DD]'"></div>
                    <div class="flex items-center gap-3">
                        <div :class="step >= 2 ? 'bg-black text-paper' : 'bg-[#E8E3DD] text-muted'" class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-serif">2</div>
                        <span class="text-[10px] uppercase tracking-[0.2em] font-sans hidden md:inline" :class="step >= 2 ? 'text-black' : 'text-muted'" x-text="lang === 'et' ? 'Kontaktandmed' : 'Contact'">Kontaktandmed</span>
                    </div>
                    <div class="h-[1px] flex-1" :class="step >= 3 ? 'bg-black' : 'bg-[#E8E3DD]'"></div>
                    <div class="flex items-center gap-3">
                        <div :class="step >= 3 ? 'bg-black text-paper' : 'bg-[#E8E3DD] text-muted'" class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-serif">3</div>
                        <span class="text-[10px] uppercase tracking-[0.2em] font-sans hidden md:inline" :class="step >= 3 ? 'text-black' : 'text-muted'" x-text="lang === 'et' ? 'Maksmine' : 'Payment'">Maksmine</span>
                    </div>
                </div>
            </div>

            <!-- Step 1: Rhythm Selection -->
            <div class="md:col-span-12 p-6 md:p-24" x-show="step === 1">
                <div class="max-w-3xl mx-auto text-center">
                    <h2 class="font-serif text-3xl md:text-4xl font-light mb-4" x-text="lang === 'et' ? 'Vali oma rütm' : 'Choose your rhythm'">Vali oma rütm</h2>
                    <p class="text-muted font-sans font-light mb-12" x-text="lang === 'et' ? 'Vali ülevalt pakett, mille soovid' : 'Select the package you want above'">Vali ülevalt pakett, mille soovid</p>
                    <a href="#hoolitsus" class="inline-block bg-black text-paper px-8 py-4 text-[11px] uppercase tracking-[0.2em] font-sans hover:bg-accent transition-all duration-500" x-text="lang === 'et' ? 'Vaata pakette' : 'View packages'">Vaata pakette</a>
                </div>
            </div>

            <!-- Step 2: Contact Information -->
            <div class="md:col-span-12 p-6 md:p-24" x-show="step === 2">
                <div class="max-w-2xl mx-auto">
                    <h2 class="font-serif text-3xl md:text-4xl font-light mb-2" x-text="isEstate ? (lang === 'et' ? 'Rätseplahendus' : 'Bespoke solution') : (lang === 'et' ? 'Kontaktandmed' : 'Contact information')">Kontaktandmed</h2>
                    <p class="text-muted font-sans font-light mb-8" x-text="isEstate ? (lang === 'et' ? 'Räägime sinu soovidest ja leiame parima lahenduse' : 'Let us know your wishes and we will find the best solution') : (lang === 'et' ? 'Vajame neid andmeid, et alustada' : 'We need this to get started')">Vajame neid andmeid, et alustada</p>

                    <!-- Selected Package Summary -->
                    <div class="bg-cream/50 p-6 mb-8 border border-[#E8E3DD]" x-show="selectedPackage">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-[10px] uppercase tracking-[0.25em] text-muted font-sans mb-1" x-text="lang === 'et' ? 'Valitud pakett' : 'Selected package'">Valitud pakett</p>
                                <p class="font-serif text-xl font-light" x-text="selectedPackage || '-'"></p>
                            </div>
                        </div>
                        <a href="#hoolitsus" @click="step = 1" class="text-[10px] uppercase tracking-[0.2em] text-muted font-sans hover:text-black mt-4 inline-block transition-colors" x-text="lang === 'et' ? 'Muuda paketti' : 'Change package'">Muuda paketti</a>
                    </div>

                    <!-- Inquiry sent confirmation -->
                    <div x-show="inquirySent" x-cloak class="text-center py-12">
                        <div class="w-16 h-16 rounded-full bg-accent/10 flex items-center justify-center mx-auto mb-6">
                            <svg class="w-8 h-8 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 13l4 4L19 7"></path></svg>
                        </div>
                        <h3 class="font-serif text-2xl font-light mb-3" x-text="lang === 'et' ? 'Päring saadetud' : 'Inquiry sent'">Päring saadetud</h3>
                        <p class="text-muted font-sans font-light" x-text="lang === 'et' ? 'Avaneb sinu meiliprogramm. Kui ei avane, kirjuta meile tere@sukoda.ee' : 'Your email client will open. If not, write to tere@sukoda.ee'">Avaneb sinu meiliprogramm.</p>
                    </div>

                    <form x-show="!inquirySent" @submit.prevent="nextStep()" class="space-y-6" novalidate>
                        <div class="border-b pb-3" :class="nameError ? 'border-red-400' : 'border-[#E8E3DD]'">
                            <label class="block text-[10px] uppercase tracking-[0.25em] text-muted font-sans mb-2" x-text="lang === 'et' ? 'Sinu nimi' : 'Your name'">Sinu nimi</label>
                            <input type="text" x-model="name" @input="nameError = false" class="w-full text-lg font-serif font-light py-2 outline-none bg-transparent" :placeholder="lang === 'et' ? 'Eesnimi ja perenimi' : 'First and last name'">
                            <p x-show="nameError" x-cloak class="mt-2 text-sm text-accent font-sans font-light" x-text="lang === 'et' ? 'Palun sisesta oma nimi' : 'Please enter your name'"></p>
                        </div>

                        <div class="border-b pb-3" :class="emailError ? 'border-red-400' : 'border-[#E8E3DD]'">
                            <label class="block text-[10px] uppercase tracking-[0.25em] text-muted font-sans mb-2" x-text="lang === 'et' ? 'E-post' : 'Email'">E-post</label>
                            <input type="email" x-model="email" @blur="validateEmail()" @input="emailError = false" class="w-full text-lg font-serif font-light py-2 outline-none bg-transparent" :placeholder="lang === 'et' ? 'sinu@email.com' : 'your@email.com'">
                            <p x-show="emailError" x-cloak class="mt-2 text-sm text-accent font-sans font-light" x-text="lang === 'et' ? 'Palun sisesta kehtiv e-posti aadress' : 'Please enter a valid email address'">Palun sisesta kehtiv e-posti aadress</p>
                        </div>

                        <div x-show="!isEstate" class="border-b pb-3" :class="phoneError ? 'border-red-400' : 'border-[#E8E3DD]'">
                            <label class="block text-[10px] uppercase tracking-[0.25em] text-muted font-sans mb-2" x-text="lang === 'et' ? 'Telefon' : 'Phone'">Telefon</label>
                            <input type="tel" x-model="phone" @blur="validatePhone()" @input="phoneError = false" class="w-full text-lg font-serif font-light py-2 outline-none bg-transparent" :placeholder="lang === 'et' ? '+372 5xxx xxxx' : '+372 5xxx xxxx'">
                            <p x-show="phoneError" x-cloak class="mt-2 text-sm text-accent font-sans font-light" x-text="lang === 'et' ? 'Palun sisesta kehtiv telefoninumber' : 'Please enter a valid phone number'">Palun sisesta kehtiv telefoninumber</p>
                        </div>

                        <div x-show="!isEstate" class="border-b pb-3 relative" :class="addressError ? 'border-red-400' : 'border-[#E8E3DD]'">
                            <label class="block text-[10px] uppercase tracking-[0.25em] text-muted font-sans mb-2" x-text="lang === 'et' ? 'Kodu aadress' : 'Address'">Kodu aadress</label>
                            <input type="text" x-model="address"
                                @input="addressError = false; searchAddress()"
                                @blur="setTimeout(() => { showSuggestions = false; validateAddress(); if(address.trim().length > 5 && addressMunicipality && !isInTallinn()) showWaitlist = true; }, 200)"
                                @focus="if(addressSuggestions.length) showSuggestions = true"
                                @keydown.escape="showSuggestions = false"
                                @keydown.enter.prevent="if(addressSuggestions.length && showSuggestions) { selectAddress(addressSuggestions[0]); }"
                                autocomplete="off"
                                class="w-full text-lg font-serif font-light py-2 outline-none bg-transparent" :placeholder="lang === 'et' ? 'Hakka tippima aadressi...' : 'Start typing address...'">

                            <!-- Autocomplete dropdown -->
                            <div x-show="showSuggestions && addressSuggestions.length > 0" x-cloak
                                 class="absolute left-0 right-0 top-full mt-1 bg-white border border-[#E8E3DD] shadow-lg z-50 max-h-60 overflow-y-auto">
                                <template x-for="(s, i) in addressSuggestions" :key="i">
                                    <button type="button" @mousedown.prevent="selectAddress(s)"
                                            class="w-full text-left px-4 py-3 hover:bg-cream/50 transition-colors border-b border-[#E8E3DD] last:border-b-0 group">
                                        <p class="text-sm font-serif font-light text-black group-hover:text-accent transition-colors" x-text="s.display"></p>
                                        <p class="text-[10px] text-muted/50 font-sans mt-0.5" x-text="s.municipality + (s.district ? ', ' + s.district : '')"></p>
                                    </button>
                                </template>
                            </div>

                            <p x-show="addressError" x-cloak class="mt-2 text-sm text-accent font-sans font-light" x-text="lang === 'et' ? 'Palun vali aadress nimekirjast' : 'Please select an address from the list'">Palun vali aadress nimekirjast</p>
                            <div class="flex items-center gap-2 mt-2" x-show="!showWaitlist && !addressError && !showSuggestions">
                                <svg class="w-3 h-3 text-muted/30" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                                <p class="text-[10px] uppercase tracking-[0.15em] text-muted/40 font-sans" x-text="addressMunicipality ? addressMunicipality : (lang === 'et' ? 'Teenindame praegu Tallinna piirkonda' : 'Currently serving the Tallinn area')"></p>
                            </div>
                        </div>

                        <!-- Non-Tallinn waitlist -->
                        <div x-show="showWaitlist && !waitlistSent" x-cloak
                             x-transition:enter="transition ease-out duration-500"
                             x-transition:enter-start="opacity-0 -translate-y-2"
                             x-transition:enter-end="opacity-100 translate-y-0"
                             class="bg-cream/70 p-6 border border-accent/20">
                            <div class="flex items-start gap-3 mb-4">
                                <div class="w-8 h-8 rounded-full border border-accent/40 flex items-center justify-center flex-shrink-0 mt-0.5">
                                    <svg class="w-4 h-4 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                                </div>
                                <div>
                                    <p class="font-serif text-lg font-light mb-1">
                                        <span x-show="lang === 'et'">Tulemas peagi — <span class="text-accent" x-text="waitlistCity"></span></span>
                                        <span x-show="lang === 'en'" x-cloak>Coming soon — <span class="text-accent" x-text="waitlistCity"></span></span>
                                    </p>
                                    <p class="text-xs text-muted font-sans font-light leading-relaxed" x-text="lang === 'et' ? 'Hetkel teenindame Tallinna piirkonda. Jäta oma e-post ja anname esimesena teada, kui alustame ' + waitlistCity + ' piirkonnas.' : 'We currently serve the Tallinn area. Leave your email and we\'ll be the first to let you know when we launch in ' + waitlistCity + '.'"></p>
                                </div>
                            </div>
                            <div class="flex gap-3 mb-3">
                                <div class="flex-1 border-b border-[#E8E3DD] pb-2">
                                    <label class="block text-[9px] uppercase tracking-[0.2em] text-muted font-sans mb-1" x-text="lang === 'et' ? 'E-post' : 'Email'">E-post</label>
                                    <input type="email" x-model="waitlistEmail" x-init="$watch('email', val => { if(!waitlistEmail) waitlistEmail = val })" class="w-full text-sm font-serif font-light py-1 outline-none bg-transparent" :placeholder="lang === 'et' ? 'sinu@email.com' : 'your@email.com'">
                                </div>
                            </div>
                            <button type="button" @click="if(!waitlistEmail) waitlistEmail = email; submitWaitlist()" :disabled="waitlistSending || !waitlistEmail" class="w-full bg-accent text-paper py-3 text-[10px] uppercase tracking-[0.2em] font-sans hover:bg-black transition-all duration-500 disabled:opacity-50">
                                <span x-show="!waitlistSending" x-text="lang === 'et' ? 'Teavita mind' : 'Notify me'">Teavita mind</span>
                                <span x-show="waitlistSending" x-cloak>...</span>
                            </button>
                        </div>

                        <!-- Waitlist confirmation -->
                        <div x-show="waitlistSent" x-cloak class="bg-cream/70 p-6 border border-accent/20 text-center">
                            <div class="w-10 h-10 rounded-full bg-accent/10 flex items-center justify-center mx-auto mb-3">
                                <svg class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 13l4 4L19 7"></path></svg>
                            </div>
                            <p class="font-serif text-lg font-light mb-1" x-text="lang === 'et' ? 'Oleme kirja pannud' : 'We\'ve noted your interest'">Oleme kirja pannud</p>
                            <p class="text-xs text-muted font-sans font-light" x-text="lang === 'et' ? 'Anname teada kohe, kui sinu linnas alustame.' : 'We\'ll let you know as soon as we launch in your city.'"></p>
                        </div>

                        <div class="border-b border-[#E8E3DD] pb-3">
                            <label class="block text-[10px] uppercase tracking-[0.25em] text-muted font-sans mb-2" x-text="isEstate ? (lang === 'et' ? 'Lisainfo' : 'Additional info') : (lang === 'et' ? 'Lisainfo (valikuline)' : 'Additional info (optional)')">Lisainfo (valikuline)</label>
                            <textarea x-model="additionalInfo" rows="2" class="w-full text-lg font-serif font-light py-2 outline-none bg-transparent resize-none" :placeholder="isEstate ? (lang === 'et' ? 'Kirjelda oma kodu ja soove...' : 'Describe your home and wishes...') : (lang === 'et' ? 'Uksekood, parkimisinfo, erijuhised...' : 'Door code, parking info, special instructions...')"></textarea>
                        </div>

                        <div class="flex gap-4 pt-4">
                            <button type="button" @click="prevStep()" class="px-8 py-4 text-[11px] uppercase tracking-[0.2em] font-sans border border-black hover:bg-black hover:text-paper transition-all duration-500" x-text="lang === 'et' ? 'Tagasi' : 'Back'">Tagasi</button>
                            <button type="submit" :disabled="isProcessing" class="flex-1 bg-black text-paper px-8 py-4 text-[11px] uppercase tracking-[0.2em] font-sans hover:bg-accent transition-all duration-500 disabled:opacity-50" x-text="isEstate ? (lang === 'et' ? 'Saada päring' : 'Send inquiry') : (lang === 'et' ? 'Järgmine samm' : 'Next step')">Järgmine samm</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Step 3: Payment -->
            <div class="md:col-span-12 p-6 md:p-24" x-show="step === 3">
                <div class="max-w-2xl mx-auto">
                    <h2 class="font-serif text-3xl md:text-4xl font-light mb-2" x-text="lang === 'et' ? 'Maksmine' : 'Payment'">Maksmine</h2>
                    <p class="text-muted font-sans font-light mb-8" x-text="lang === 'et' ? 'Viimane samm' : 'Last step'">Viimane samm</p>

                    <!-- Order Summary -->
                    <div class="bg-black text-paper p-8 mb-6">
                        <div class="mb-6">
                            <p class="text-[10px] uppercase tracking-[0.25em] text-muted font-sans mb-2" x-text="lang === 'et' ? 'Pakett' : 'Package'">Pakett</p>
                            <p class="font-serif text-xl font-light mb-1" x-text="selectedPackage"></p>
                            <p class="text-sm text-muted font-sans font-light" x-text="lang === 'et' ? 'Makstakse igakuiselt automaatselt' : 'Charged monthly automatically'">Makstakse igakuiselt automaatselt</p>
                        </div>
                        <div class="border-t border-gray-700 pt-6 flex justify-between items-center">
                            <span class="text-[10px] uppercase tracking-[0.25em] text-muted font-sans" x-text="lang === 'et' ? 'Kokku' : 'Total'">Kokku</span>
                            <span class="font-serif text-4xl font-light">€<span x-text="getTotalPrice()">0</span><span class="text-lg">/kuu</span></span>
                        </div>
                    </div>

                    <form @submit.prevent="startPayment()" class="space-y-6">
                        <div class="bg-cream/50 p-6 text-sm text-muted font-sans font-light">
                            <p class="mb-3 font-medium text-black" x-text="lang === 'et' ? 'Pärast makset:' : 'After payment:'">Pärast makset:</p>
                            <ul class="space-y-2 list-none">
                                <li class="flex items-start gap-2">
                                    <span class="text-accent mt-0.5">—</span>
                                    <span x-text="lang === 'et' ? 'Saad kohe kinnituse e-postile' : 'You\'ll receive instant confirmation by email'">Saad kohe kinnituse e-postile</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span class="text-accent mt-0.5">—</span>
                                    <span x-text="lang === 'et' ? 'Valid ise sobiva aja kalendrist' : 'Choose your preferred time from the calendar'">Valid ise sobiva aja kalendrist</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span class="text-accent mt-0.5">—</span>
                                    <span x-text="lang === 'et' ? 'Kõik toimub automaatselt' : 'Everything happens automatically'">Kõik toimub automaatselt</span>
                                </li>
                            </ul>
                        </div>

                        <!-- Error message -->
                        <div x-show="checkoutError" x-cloak class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 text-sm font-sans">
                            <span x-text="checkoutError"></span>
                        </div>

                        <div class="flex gap-4 pt-4">
                            <button type="button" @click="prevStep()" :disabled="isProcessing" class="px-8 py-4 text-[11px] uppercase tracking-[0.2em] font-sans border border-black hover:bg-black hover:text-paper transition-all duration-500 disabled:opacity-50" x-text="lang === 'et' ? 'Tagasi' : 'Back'">Tagasi</button>
                            <button type="submit" :disabled="isProcessing" class="flex-1 bg-black text-paper px-8 py-4 text-[11px] uppercase tracking-[0.2em] font-sans hover:bg-accent transition-all duration-500 disabled:opacity-50 flex items-center justify-center gap-2">
                                <span x-show="isProcessing" class="w-4 h-4 border-2 border-paper border-t-transparent rounded-full animate-spin"></span>
                                <span x-text="isProcessing ? (lang === 'et' ? 'Töötleme...' : 'Processing...') : (lang === 'et' ? 'Maksa nüüd' : 'Pay now')">Maksa nüüd</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="bg-black text-paper">
            <div class="grid md:grid-cols-12 py-16 px-6 md:px-12">
                <div class="md:col-span-4 mb-8 md:mb-0">
                    <a href="#" class="font-serif text-2xl tracking-[0.08em] font-light block mb-4">SUKODA</a>
                    <p class="text-muted text-xs font-sans font-light leading-relaxed max-w-xs">
                        <span x-show="lang === 'et'">Sinu kodu, meie hoole all.<br>Tallinn, Eesti.</span>
                        <span x-show="lang === 'en'" x-cloak>Your home, our care.<br>Tallinn, Estonia.</span>
                    </p>
                </div>
                <div class="md:col-span-4 mb-8 md:mb-0">
                    <p class="text-[10px] uppercase tracking-[0.25em] text-muted font-sans mb-4">
                        <span x-show="lang === 'et'">Lingid</span>
                        <span x-show="lang === 'en'" x-cloak>Links</span>
                    </p>
                    <div class="flex flex-col gap-3 text-xs text-muted/70 font-sans font-light">
                        <a href="tingimused.html" class="hover:text-paper transition-colors" x-text="lang === 'et' ? 'Tingimused' : 'Terms'">Tingimused</a>
                        <a href="privaatsus.html" class="hover:text-paper transition-colors" x-text="lang === 'et' ? 'Privaatsuspoliitika' : 'Privacy'">Privaatsuspoliitika</a>
                    </div>
                </div>
                <div class="md:col-span-4">
                    <p class="text-[10px] uppercase tracking-[0.25em] text-muted font-sans mb-4">
                        <span x-show="lang === 'et'">Kontakt</span>
                        <span x-show="lang === 'en'" x-cloak>Contact</span>
                    </p>
                    <a href="mailto:tere@sukoda.ee" class="text-xs font-sans font-light text-muted/70 hover:text-paper transition-colors block mb-2">tere@sukoda.ee</a>
                    <a href="mailto:partner@sukoda.ee" class="text-xs font-sans font-light text-muted/70 hover:text-paper transition-colors block">partner@sukoda.ee</a>
                </div>
            </div>
            <div class="border-t border-gray-800 py-6 px-6 md:px-12">
                <p class="text-[10px] text-muted/40 font-sans text-center tracking-wide">© 2026 SUKODA. Kõik õigused kaitstud.</p>
            </div>
        </footer>

    </div>

    <!-- Scripts -->
    <script>
        // Preloader
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('preloader').classList.add('hidden');
            }, 1200);
        });

        // Scroll progress bar
        window.addEventListener('scroll', () => {
            const scrollTop = document.documentElement.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const progress = (scrollTop / scrollHeight) * 100;
            document.getElementById('scrollProgress').style.width = progress + '%';
        });

        // Scroll reveal with Intersection Observer
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
        });
    </script>

</body>
</html>
